<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>检查用户名是否可用</title>
</head>
<body>
<div>
  <label for="username">
    用户名
    <input type="text" id="username" value="admin">
  </label>
  <span id="tip">显示结果</span>
</div>

<script>
  document.getElementById("username").onblur = function () {
    // 取到 username 文本框 的值。 给谁绑定的事件，this 就代表谁
    const username = this.value;
    // 取到显示提示信息的 span 标签
    let tip = document.getElementById("tip");
    // 设置为行内显示（成功与否，都要提示）
    tip.style.display = 'inline';
    // 发起 XHR 请求
    let xHttp;
    if (window.XMLHttpRequest) {
      xHttp = new XMLHttpRequest();
    } else {
      xHttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xHttp.open("GET", "http://localhost:8080/check?username=" + username);
    xHttp.send();

    xHttp.onreadystatechange = function () {
      if (this.readyState === 4 && this.status === 200) {
        console.log(this.responseText);
        //判断返回结果
        if (this.responseText === "true") {
          //用户名可用
          tip.innerHTML = '用户名可用';
          tip.style.color = 'green';
        } else {
          //用户名已存在
          tip.innerHTML = '用户名已存在';
          tip.style.color = 'red';
        }
      }
    };
  };
</script>
</body>
</html>